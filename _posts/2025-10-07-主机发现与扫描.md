---
title: "主机发现与扫描"
date: 2025-10-07
categories: [Windows常用知识]







---



## 主机发现和端口扫描

整理自`[Security-Learning/Penetration/内网信息搜集/内网信息搜集 e8733b02d1614977972a074a690afd8e.md at main · H3rmesk1t/Security-Learning](https://github.com/H3rmesk1t/Security-Learning/blob/main/Penetration/内网信息搜集/内网信息搜集 e8733b02d1614977972a074a690afd8e.md)`

#### 主机发现：

- 可以使用的协议？

  - ICMP协议（错误诊断协议）（网络层）
    `for /L %I in (1,1,254) DO @ping -w 1 -n 1 10.10.10.%I | findstr "TTL="`
    ping是基于ICMP的，但是ICMP不止于ping
  - NetBIOS（应用层，能够基于TCP）
    `https://github.com/lifenjoiner/nbtscan`（利用工具）
    `nbtscan.exe 10.10.10.0/24`
  - UDP协议（运输层）
    `https://sourceforge.net/projects/osace/files/latest/download`（利用工具）
    `unicornscan -mU 10.10.10.0/24`
  - ARP协议（我更倾向于链路层）
    只能扫同一路由器下的机器
    `https://github.com/QbsuranAlang/arp-scan-windows-`（利用工具）
    `arp-scan.exe -t 10.10.10.0/24`
  - SMB协议（应用层）
    `https://github.com/maaaaz/CrackMapExecWin`（利用工具）
    `crackmapexec.exe 10.10.10.0/24`

- 上面的例子是`10.10.10.0/24`，如何知道要扫描的范围？
  执行`config /all`

  ``````
  无线局域网适配器 WLAN:
  
     连接特定的 DNS 后缀 . . . . . . . :
     描述. . . . . . . . . . . . . . . : 
     物理地址. . . . . . . . . . . . . : 
     DHCP 已启用 . . . . . . . . . . . : 
     自动配置已启用. . . . . . . . . . : 
     IPv4 地址 . . . . . . . . . . . . : 100.66.60.64(首选)
     子网掩码  . . . . . . . . . . . . : 255.255.0.0
     获得租约的时间  . . . . . . . . . : 
     租约过期的时间  . . . . . . . . . : 
     默认网关. . . . . . . . . . . . . : 
     DHCP 服务器 . . . . . . . . . . . : 
     DNS 服务器  . . . . . . . . . . . : 
                                         
     TCPIP 上的 NetBIOS  . . . . . . . : 已启用
  ``````

  注意看返回值中的：IPV4地址和子网掩码
  像上面的情况选择扫描范围就是`100.66.60.64/16`

#### 端口扫描：

- 用哪些工具？
  - `nmap`（全面但是如果是要将其落地到靶机有很高的风险）
  - `telnet`
  - 在`powershell`里面手写

#### 主机发现和主机扫描这两个也可以使用`MetaSploit`