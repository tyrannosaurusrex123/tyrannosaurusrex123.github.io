---
title: "身份验证与授权控制"
date: 2025-10-07
categories: [Windows常用知识]








---



## 身份验证与授权控制

#### 身份验证：

- 工作组：自己管自己。在`System32`文件夹下有SAM文件（存储用户和哈希后的密码的），用户每次登录会通过与SAM文件进行比对，如果通过，就发放SID（本地访问令牌）
- 域：DC（域控制器）管所有。使用域控制器下的`NTDS.DIT`进行域账户身份校验，通过后发放SID（域访问令牌）

#### 授权控制：

- 不管是**工作组**还是**域**，授权控制都是通过ACL实现的

- ACL的数据是作为资源的**元数据**存储的，对于不同类型的数据，其存储的方式不一样
  反正就是**不是**统一存储，而是每个数据自己保存自己的

- | 资源类型                  | 存储位置/机制                   | 简要说明                                                     |
  | ------------------------- | ------------------------------- | ------------------------------------------------------------ |
  | **文件和文件夹**          | **NTFS 文件系统的元数据**       | ACL 数据存储在文件/文件夹记录中的特殊属性流（如 `$SECURITY_DESCRIPTOR`）中。这是**分散式**存储。 |
  | **注册表项**              | **注册表蜂巢文件 (Hive Files)** | ACL 数据作为注册表项的属性存储在其所属的蜂巢文件（如 `SAM`, `SECURITY`, `SYSTEM` 等）中。 |
  | **Active Directory 对象** | **NTDS.DIT 数据库**             | ACL 数据作为域控制器上 AD 数据库中对象的属性存储。此 ACL 控制的是谁能**管理**该 AD 对象（如修改用户密码）。 |
  | **服务**                  | **服务控制管理器 (SCM) 数据库** | Windows 服务的 ACL 存储在 SCM 维护的内部数据库中，通常与注册表或内存中的数据结构相关联。 |
  | **共享文件夹 (Share)**    | **注册表**                      | 共享权限是独立于 NTFS 权限的。这些权限（谁可以通过网络访问共享）通常存储在注册表的特定位置（例如 `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Shares`）。 |

  

- ACL是一个操作系统的安全内核功能，是基于SID的